--
-- PostgreSQL database dump
--

-- Dumped from database version 13.21 (Debian 13.21-1.pgdg120+1)
-- Dumped by pg_dump version 13.21 (Debian 13.21-1.pgdg120+1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: address; Type: TABLE; Schema: public; Owner: application
--

CREATE TABLE public.address (
    id bigint NOT NULL,
    street character varying(255),
    number character varying(10),
    complement character varying(255),
    neighborhood character varying(255),
    city character varying(255),
    state character varying(255),
    zip_code character varying(255),
    user_id bigint
);


ALTER TABLE public.address OWNER TO application;

--
-- Name: TABLE address; Type: COMMENT; Schema: public; Owner: application
--

COMMENT ON TABLE public.address IS 'Stores delivery addresses for orders';


--
-- Name: addres_id_seq; Type: SEQUENCE; Schema: public; Owner: application
--

ALTER TABLE public.address ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.addres_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: app_user; Type: TABLE; Schema: public; Owner: application
--

CREATE TABLE public.app_user (
    id bigint NOT NULL,
    username character varying(255),
    password character varying(255),
    first_name character varying(255),
    last_name character varying(255),
    email character varying(255)
);


ALTER TABLE public.app_user OWNER TO application;

--
-- Name: app_user_id_seq; Type: SEQUENCE; Schema: public; Owner: application
--

CREATE SEQUENCE public.app_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.app_user_id_seq OWNER TO application;

--
-- Name: app_user_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: application
--

ALTER SEQUENCE public.app_user_id_seq OWNED BY public.app_user.id;


--
-- Name: category; Type: TABLE; Schema: public; Owner: application
--

CREATE TABLE public.category (
    id bigint NOT NULL,
    name character varying(255) NOT NULL
);


ALTER TABLE public.category OWNER TO application;

--
-- Name: category_id_seq; Type: SEQUENCE; Schema: public; Owner: application
--

CREATE SEQUENCE public.category_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.category_id_seq OWNER TO application;

--
-- Name: category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: application
--

ALTER SEQUENCE public.category_id_seq OWNED BY public.category.id;


--
-- Name: order_items; Type: TABLE; Schema: public; Owner: application
--

CREATE TABLE public.order_items (
    id bigint NOT NULL,
    order_id bigint NOT NULL,
    product_id bigint NOT NULL,
    quantity integer NOT NULL,
    unit_price numeric(10,2) NOT NULL,
    total numeric(10,2) NOT NULL
);


ALTER TABLE public.order_items OWNER TO application;

--
-- Name: TABLE order_items; Type: COMMENT; Schema: public; Owner: application
--

COMMENT ON TABLE public.order_items IS 'Stores items within each order';


--
-- Name: order_items_id_seq; Type: SEQUENCE; Schema: public; Owner: application
--

ALTER TABLE public.order_items ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.order_items_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: orders; Type: TABLE; Schema: public; Owner: application
--

CREATE TABLE public.orders (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    customer_name character varying(255) NOT NULL,
    customer_email character varying(255) NOT NULL,
    customer_phone character varying(20) NOT NULL,
    address_id bigint NOT NULL,
    total numeric(10,2) NOT NULL,
    status character varying(50) DEFAULT 'PENDING'::character varying NOT NULL,
    payment_method character varying(50) NOT NULL,
    payment_installments integer,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.orders OWNER TO application;

--
-- Name: TABLE orders; Type: COMMENT; Schema: public; Owner: application
--

COMMENT ON TABLE public.orders IS 'Stores customer orders';


--
-- Name: COLUMN orders.status; Type: COMMENT; Schema: public; Owner: application
--

COMMENT ON COLUMN public.orders.status IS 'Order status: PENDING, CONFIRMED, PROCESSING, SHIPPED, DELIVERED, CANCELLED';


--
-- Name: COLUMN orders.payment_method; Type: COMMENT; Schema: public; Owner: application
--

COMMENT ON COLUMN public.orders.payment_method IS 'Payment method: CREDIT_CARD, DEBIT_CARD, PIX, BOLETO';


--
-- Name: orders_id_seq; Type: SEQUENCE; Schema: public; Owner: application
--

ALTER TABLE public.orders ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.orders_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: product; Type: TABLE; Schema: public; Owner: application
--

CREATE TABLE public.product (
    name character varying(255) NOT NULL,
    description character varying(255),
    category_id bigint NOT NULL,
    id bigint NOT NULL,
    price bigint NOT NULL,
    image_url character varying(500),
    quantity integer DEFAULT 0 NOT NULL
);


ALTER TABLE public.product OWNER TO application;

--
-- Name: product_id_seq; Type: SEQUENCE; Schema: public; Owner: application
--

ALTER TABLE public.product ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.product_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: role; Type: TABLE; Schema: public; Owner: application
--

CREATE TABLE public.role (
    id integer NOT NULL,
    name character varying(255)
);


ALTER TABLE public.role OWNER TO application;

--
-- Name: role_id_seq; Type: SEQUENCE; Schema: public; Owner: application
--

CREATE SEQUENCE public.role_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.role_id_seq OWNER TO application;

--
-- Name: role_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: application
--

ALTER SEQUENCE public.role_id_seq OWNED BY public.role.id;


--
-- Name: user_roles; Type: TABLE; Schema: public; Owner: application
--

CREATE TABLE public.user_roles (
    user_id bigint NOT NULL,
    role_id integer NOT NULL
);


ALTER TABLE public.user_roles OWNER TO application;

--
-- Name: app_user id; Type: DEFAULT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.app_user ALTER COLUMN id SET DEFAULT nextval('public.app_user_id_seq'::regclass);


--
-- Name: category id; Type: DEFAULT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.category ALTER COLUMN id SET DEFAULT nextval('public.category_id_seq'::regclass);


--
-- Name: role id; Type: DEFAULT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.role ALTER COLUMN id SET DEFAULT nextval('public.role_id_seq'::regclass);


--
-- Data for Name: address; Type: TABLE DATA; Schema: public; Owner: application
--

COPY public.address (id, street, number, complement, neighborhood, city, state, zip_code, user_id) FROM stdin;
\.


--
-- Data for Name: app_user; Type: TABLE DATA; Schema: public; Owner: application
--

COPY public.app_user (id, username, password, first_name, last_name, email) FROM stdin;
1	admin	$2a$10$e.g.BCryptHashForPassword	Admin	User	admin@example.com
2	user1	$2a$10$e.g.BCryptHashForPassword	Test	User1	user1@example.com
3	user2	$2a$10$e.g.BCryptHashForPassword	Test	User2	user2@example.com
4	k	$2a$10$mNb9BtaBJY2cA0ntpMGMkeD6pTBT7QxRCTKi1PBgPEw.M7PyQQXE2	k	k	k@k.com
\.


--
-- Data for Name: category; Type: TABLE DATA; Schema: public; Owner: application
--

COPY public.category (id, name) FROM stdin;
1	Analgesics
2	Antibiotics
3	Antihistamines
4	Antacids
5	Antidepressants
\.


--
-- Data for Name: order_items; Type: TABLE DATA; Schema: public; Owner: application
--

COPY public.order_items (id, order_id, product_id, quantity, unit_price, total) FROM stdin;
\.


--
-- Data for Name: orders; Type: TABLE DATA; Schema: public; Owner: application
--

COPY public.orders (id, user_id, customer_name, customer_email, customer_phone, address_id, total, status, payment_method, payment_installments, created_at, updated_at) FROM stdin;
\.


--
-- Data for Name: product; Type: TABLE DATA; Schema: public; Owner: application
--

COPY public.product (name, description, category_id, id, price, image_url, quantity) FROM stdin;
Paracetamol	Pain reliever and fever reducer	1	1	15	/uploads/products/paracetamol.png14
Ibuprofen	NSAID used for pain and inflammation	1	2	18	/uploads/products/ibuprofen.png	8
Calcium Carbonate	Used to treat heartburn and indigestion	4	3	8	/uploads/products/calcium_carbonate.png	13
Amoxicillin	Broad-spectrum penicillin antibiotic	2	4	35	/uploads/products/amoxicillin.png	10
Azithromycin	Macrolide antibiotic for infections	2	5	48	/uploads/products/azithromycin.png	0
Loratadine	Non-drowsy allergy medication	3	6	11	/uploads/products/loratadine.png6
Aspirin	Used to reduce pain, fever, or inflammation	1	7	12	/uploads/products/aspirin.png	1
\.


--
-- Data for Name: role; Type: TABLE DATA; Schema: public; Owner: application
--

COPY public.role (id, name) FROM stdin;
1	USER
2	ADMIN
\.


--
-- Data for Name: user_roles; Type: TABLE DATA; Schema: public; Owner: application
--

COPY public.user_roles (user_id, role_id) FROM stdin;
1	2
2	1
3	1
4	2
\.


--
-- Name: addres_id_seq; Type: SEQUENCE SET; Schema: public; Owner: application
--

SELECT pg_catalog.setval('public.addres_id_seq', 1, false);


--
-- Name: app_user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: application
--

SELECT pg_catalog.setval('public.app_user_id_seq', 3, true);


--
-- Name: category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: application
--

SELECT pg_catalog.setval('public.category_id_seq', 12, true);


--
-- Name: order_items_id_seq; Type: SEQUENCE SET; Schema: public; Owner: application
--

SELECT pg_catalog.setval('public.order_items_id_seq', 1, false);


--
-- Name: orders_id_seq; Type: SEQUENCE SET; Schema: public; Owner: application
--

SELECT pg_catalog.setval('public.orders_id_seq', 1, false);


--
-- Name: product_id_seq; Type: SEQUENCE SET; Schema: public; Owner: application
--

SELECT pg_catalog.setval('public.product_id_seq', 3, true);


--
-- Name: role_id_seq; Type: SEQUENCE SET; Schema: public; Owner: application
--

SELECT pg_catalog.setval('public.role_id_seq', 2, true);


--
-- Name: address address_pkey; Type: CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.address
    ADD CONSTRAINT address_pkey PRIMARY KEY (id);


--
-- Name: app_user app_user_pkey; Type: CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.app_user
    ADD CONSTRAINT app_user_pkey PRIMARY KEY (id);


--
-- Name: app_user app_user_username_key; Type: CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.app_user
    ADD CONSTRAINT app_user_username_key UNIQUE (username);


--
-- Name: category category_pkey; Type: CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.category
    ADD CONSTRAINT category_pkey PRIMARY KEY (id);


--
-- Name: order_items order_items_pkey; Type: CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.order_items
    ADD CONSTRAINT order_items_pkey PRIMARY KEY (id);


--
-- Name: orders orders_pkey; Type: CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.orders
    ADD CONSTRAINT orders_pkey PRIMARY KEY (id);


--
-- Name: product product_pkey; Type: CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.product
    ADD CONSTRAINT product_pkey PRIMARY KEY (id);


--
-- Name: role role_name_key; Type: CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.role
    ADD CONSTRAINT role_name_key UNIQUE (name);


--
-- Name: role role_pkey; Type: CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.role
    ADD CONSTRAINT role_pkey PRIMARY KEY (id);


--
-- Name: app_user uc_app_user_email; Type: CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.app_user
    ADD CONSTRAINT uc_app_user_email UNIQUE (email);


--
-- Name: product uc_product_name; Type: CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.product
    ADD CONSTRAINT uc_product_name UNIQUE (name);


--
-- Name: category uq_category_name; Type: CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.category
    ADD CONSTRAINT uq_category_name UNIQUE (name);


--
-- Name: user_roles user_roles_pkey; Type: CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.user_roles
    ADD CONSTRAINT user_roles_pkey PRIMARY KEY (user_id, role_id);


--
-- Name: idx_order_items_order_id; Type: INDEX; Schema: public; Owner: application
--

CREATE INDEX idx_order_items_order_id ON public.order_items USING btree (order_id);


--
-- Name: idx_order_items_product_id; Type: INDEX; Schema: public; Owner: application
--

CREATE INDEX idx_order_items_product_id ON public.order_items USING btree (product_id);


--
-- Name: idx_orders_created_at; Type: INDEX; Schema: public; Owner: application
--

CREATE INDEX idx_orders_created_at ON public.orders USING btree (created_at);


--
-- Name: idx_orders_status; Type: INDEX; Schema: public; Owner: application
--

CREATE INDEX idx_orders_status ON public.orders USING btree (status);


--
-- Name: idx_orders_user_id; Type: INDEX; Schema: public; Owner: application
--

CREATE INDEX idx_orders_user_id ON public.orders USING btree (user_id);


--
-- Name: product fk_product_on_category; Type: FK CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.product
    ADD CONSTRAINT fk_product_on_category FOREIGN KEY (category_id) REFERENCES public.category(id);


--
-- Name: order_items order_items_order_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.order_items
    ADD CONSTRAINT order_items_order_id_fkey FOREIGN KEY (order_id) REFERENCES public.orders(id) ON DELETE CASCADE;


--
-- Name: order_items order_items_product_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.order_items
    ADD CONSTRAINT order_items_product_id_fkey FOREIGN KEY (product_id) REFERENCES public.product(id);


--
-- Name: orders orders_address_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.orders
    ADD CONSTRAINT orders_address_id_fkey FOREIGN KEY (address_id) REFERENCES public.address(id);


--
-- Name: orders orders_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.orders
    ADD CONSTRAINT orders_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.app_user(id);


--
-- Name: user_roles user_roles_role_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.user_roles
    ADD CONSTRAINT user_roles_role_id_fkey FOREIGN KEY (role_id) REFERENCES public.role(id) ON DELETE CASCADE;


--
-- Name: user_roles user_roles_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: application
--

ALTER TABLE ONLY public.user_roles
    ADD CONSTRAINT user_roles_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.app_user(id) ON DELETE CASCADE;


--
-- PostgreSQL database dump complete
--
